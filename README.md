
# File Upload Application for Intetech by Elisaveta Koltsova

Этот проект предоставляет функционал для загрузки файлов на сервер с возможностью проверки формата и размера файла, а также отображения состояния загрузки.

## Функции:
1. **Форма загрузки файла**:
    - Поле для ввода имени файла.
    - Поле для загрузки файла.
    - Кнопка "Загрузить", которая активируется только после заполнения имени и выбора файла.

2. **Проверка файла**:
    - Поддерживаются форматы `.txt`, `.json`, `.csv`.
    - Максимальный размер файла — 1024 байта.
    - Ошибка при неверном формате или превышении размера файла.

3. **Отправка файла на сервер**:
    - Кнопка "Загрузить" отправляет файл и имя на сервер через API.
    - Анимация загрузки и блокировка интерфейса во время отправки.
    - Обработка ответа от сервера с отображением сообщения об успешной загрузке или ошибке.

---

## Запуск проекта

Проект использует **Vite** для сборки и **React** для фронтенда.

### Запуск в режиме просмотра

Можно воспользоваться дополнением "Live Server" из папки dist или запустить с помощью терминала:

```bash
npm run preview
```

### Локальная разработка
Для начала необходимо установить завиновисти:

```bash
npm i
```

Для запуска проекта в режиме разработки, используйте команду:

```bash
npm run dev
```

---

## Как использовать

1. **Загрузите файл**:
    - Заполните поле с именем файла.
    - Выберите файл (форматы: `.txt`, `.json`, `.csv`, максимальный размер — 1024 байта).
    - Кнопка "Загрузить на сервер" активируется только после того, как имя файла и файл выбраны.

2. **Обработка загрузки**:
    - После нажатия кнопки, файл будет отправлен на сервер.
    - Отображается анимация загрузки.
    - При успешной загрузке выводится сообщение с ответом от сервера.
    - В случае ошибки, отображается сообщение об ошибке.

---

## Структура проекта

- **components**: Компоненты, отвечающие за интерфейс загрузки.
- **services**: Логика работы с сервером и загрузкой файлов.
- **styles**: Стили для интерфейса и анимаций.
- **consts**: Константы для поддерживаемых форматов файлов.

---

## Логика кода и программы

### Основная логика
Программа реализует форму для загрузки файлов с возможностью проверки и отправки на сервер. Ключевые моменты логики:

1. **Состояния**:
   - **Состояния для работы с файлами**: `file`, `fileName`, `dragOver`.
   - **Состояния для управления процессом загрузки**: `isUploading`, `isUploadingEnd`, `progress`, `isLoader`.
   - **Состояния для обработки ошибок**: `error`, `errorValidationMessage`, `isUploadedToServer`.

2. **Проверка и сохранение файла**:
   - Файл проверяется на соответствие разрешённым форматам (`.txt`, `.json`, `.csv`) и размеру (не более 1024 байт).
   - Если файл подходит, его имя сохраняется, и начинается процесс загрузки.

3. **Процесс загрузки**:
   - При выборе файла начинается имитация загрузки с увеличением прогресса через интервал.
   - Прогресс загрузки отображается в реальном времени с использованием компонента `FileUploadProgress`.
   
4. **Отправка файла на сервер**:
   - Когда файл готов, нажимается кнопка "Загрузить", которая блокирует интерфейс для предотвращения повторной отправки.
   - Файл и имя отправляются на сервер через API, используя функцию `uploadFile`.
   - В случае успеха показывается сообщение об успешной загрузке, если произошла ошибка — отображается сообщение об ошибке.

5. **Управление UI**:
   - В процессе загрузки показывается анимация загрузки, а кнопка "Загрузить" блокируется до окончания загрузки.
   - После загрузки интерфейс очищается, и пользователь может загрузить новый файл.

### Используемые компоненты

- **FileInput**: Компонент для ввода имени файла.
- **FileDropZone**: Компонент для перетаскивания файлов в зону.
- **FileUploadProgress**: Компонент для отображения прогресса загрузки.
- **SuccessUploadMessage и ErrorUploadMessage**: Компоненты для отображения сообщений об успешной загрузке и ошибках.

### Взаимодействие с Shadow DOM
Для изоляции стилей и функционала используется **Shadow DOM**. Это позволяет избежать конфликтов между стилями компонента и остальной частью приложения, а также делает компоненты более независимыми и удобными для повторного использования.

### Обработка ошибок и валидация
- Проверяется формат файла и его размер.
- Если файл не соответствует требованиям, выводится сообщение об ошибке.
- Если имя файла не задано, появляется соответствующее сообщение.
